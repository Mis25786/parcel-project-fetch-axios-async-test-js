{"mappings":";;AAgDA,MAAMA,EAAOC,SAASC,eAAe,QAC/BC,EAAUF,SAASC,eAAe,WAIlCE,EAAkB,ICVT,MAMbC,SACE,MAAMC,EAAM,qEAA6BC,KAAKC,oBAAoBD,KAAKE,kBAEvE,OAAOC,MAAMJ,GACVK,MAAKC,GAAYA,EAASC,SAC1BF,MAAK,EAACG,KAAEA,MACPP,KAAKQ,WACED,I,CAKEC,WACbR,KAAKE,MAAQ,C,CAGfO,YACET,KAAKE,KAAO,C,CAtBdQ,cACEV,KAAKE,KAAO,EACZF,KAAKC,YAAc,E,GDQvBU,QAAQC,IAAIf,GACZ,MAAMgB,EAAc,IEvDL,MAQUC,UAAbC,GACR,OAAOrB,SAASsB,cAAcD,E,CAIbE,OACjBjB,KAAKkB,OAAOC,UAAUC,IAAI,S,CAGRC,OAClBrB,KAAKkB,OAAOC,UAAUG,OAAO,S,CAI/BC,WACEvB,KAAKkB,OAAOK,UAAW,EACvBvB,KAAKkB,OAAOM,YAAc,Y,CAE5BC,SACEzB,KAAKkB,OAAOK,UAAW,EACvBvB,KAAKkB,OAAOM,YAAc,c,CA3B5Bd,aAAYK,SAAEA,EAAQW,SAAEA,IACtB1B,KAAKkB,OAASlB,KAAKc,UAAUC,GACzBW,EAAU1B,KAAKiB,OACdjB,KAAKqB,M,GFmDsB,CAAEN,SAAU,YAAaW,UAAU,IAmD7C,SAAjBC,IAGP,OAFAd,EAAYU,WAEL1B,EACJC,SACAM,MAAKG,IACJ,GAAoB,IAAhBA,EAAKqB,OAAc,MAAM,IAAIC,MAAM,WACvC,OAAOtB,EAAKuB,QAAO,CAACC,EAAKC,IAqBF,UAAPC,aAAEA,EAAYC,KAAEA,EAAIC,GAAEA,IAC1C,MAAO,8BACDA,iBACAD,0BACSD,SAAoBC,2C,CAzBEE,CAAaJ,GAAOD,GAAK,GAAG,IAE9D3B,MAAK2B,IACJM,EAAgBN,GAChBlB,EAAYY,QAAQ,IAErBa,MAAMC,E,CAIqB,SAAvBF,EAAgBG,GAEvB5C,EAAQ6C,mBAAmB,YAAaD,E,CAkB1C,SAASD,EAAQG,GACf7B,EAAYI,OACZoB,EAAgB,qB,CAzFlB1B,QAAQC,IAAIC,GAEZpB,EAAKkD,iBAAiB,UAKtB,SAAkBC,GAChBA,EAAEC,iBAGwC,MAApCC,EAAOF,EAAEG,cAETC,EAAQF,EAAKG,SAASC,MAAMF,MAAMG,OAGDtD,EAAvBI,YAAc+C,EAGGnD,EAAjBY,YAuDhBb,EAAQwD,UAAY,GAzCpBzB,IAAa0B,SAAQ,IAAMP,EAAKQ,UAEhCzC,EAAYQ,M,IA9BHkC,SAAFZ,iBAAiB,QAAShB","sources":["src/js/main.js","src/js/api.js","src/js/LoadMoreBtn.js"],"sourcesContent":["//! ================== модуль 10 запит на API ====================\n\n// import fetchData from './api';\n\n// const form = document.getElementById('form');\n// const newsImg = document.getElementById('newsImg');\n\n// form.addEventListener('submit', onsubmit);\n\n// function onsubmit(e) {\n//   e.preventDefault();\n\n//   const form = e.currentTarget;\n//   const value = form.elements.photo.value.trim();\n\n//   fetchData(value)\n//     .then(({ hits }) => {\n//       if (hits.length === 0) throw new Error('No data');\n//       return hits.reduce((acc, hit) => createMarcup(hit) + acc, '');\n//     })\n//     .then(updateImageList)\n//     .catch(onError)\n//     .finally(() => form.reset());\n// }\n\n// function updateImageList(markup) {\n//   newsImg.innerHTML = markup;\n// }\n\n// function createMarcup({ webformatURL, tags, id }) {\n//   return `<div class='thumb'>\n//   <h1>${id}</h1>\n//   <h4>${tags}</h4>\n//       <img src=${webformatURL} alt=${tags} width=\"240\" class=\"image\"/>\n//     </div>`;\n// }\n\n// function onError(err) {\n//   updateImageList('<h1>Not faund</h1>');\n// }\n\n//! ================== модуль 10 пагінація ====================\n\nimport ImageApiService from './api';\nimport LoadMoreBtn from './LoadMoreBtn';\nimport LoadMoreBtn from './LoadMoreBtn';\nimport LoadMoreBtn from './LoadMoreBtn';\n\nconst form = document.getElementById('form');\nconst newsImg = document.getElementById('newsImg');\n// const loadMore = document.getElementById('loadMore');  // замінилисьме на const loadMoreBtn = new LoadMoreBtn({ selector: '#loadMore' });\n\n//* створюємо екземпляр класу (щоб викликати клас)\nconst imageApiService = new ImageApiService();\nconsole.log(imageApiService);\nconst loadMoreBtn = new LoadMoreBtn({ selector: '#loadMore', isHidden: true });\nconsole.log(loadMoreBtn);\n\nform.addEventListener('submit', onSubmit);\n// loadMore.addEventListener('click', onloadMore); // замінилисьме на featchHits\n// loadMore.addEventListener('click', featchHits); // замінюємо на loadMore.button.addEventListener('click', featchHits);\nloadMore.addEventListener('click', featchHits);\n\nfunction onSubmit(e) {\n  e.preventDefault();\n\n  //* визначаємо дякий елемент в формі був активований\n  const form = e.currentTarget;\n  //* отримуемо з інпуту введене значення\n  const value = form.elements.photo.value.trim();\n\n  //* передаємо з інпуту введене в клас => конструктор\n  imageApiService.searchQuery = value;\n\n  //* скидуємо при новому запиті на 1 сторінку\n  imageApiService.resetPage();\n  //* очищаємо список\n  clearImageList();\n\n  //* робимо запит і виводимо 1 сторінку\n  // imageApiService\n  //   .getImg()\n  //   .then(hits => {\n  //     if (hits.length === 0) throw new Error('No data');\n  //     return hits.reduce((acc, hit) => createMarcup(hit) + acc, '');\n  //   })\n  //   .then(appendImageList)\n  //   .catch(onError)\n  //   .finally(() => form.reset());\n  featchHits().finally(() => form.reset());\n\n  loadMoreBtn.show();\n}\n\n//* кнопка додати ще робить новий запит\n// function onloadMore() {\n//   imageApiService\n//     .getImg()\n//     .then(hits => {\n//       if (hits.length === 0) throw new Error('No data');\n//       return hits.reduce((acc, hit) => createMarcup(hit) + acc, '');\n//     })\n//     .then(appendImageList)\n//     .catch(onError);\n// }\n// замінюємо onloadMore щоб не дублювати код\nfunction featchHits() {\n  loadMoreBtn.disabled();\n\n  return imageApiService\n    .getImg()\n    .then(hits => {\n      if (hits.length === 0) throw new Error('No data');\n      return hits.reduce((acc, hit) => createMarcup(hit) + acc, '');\n    })\n    .then(acc => {\n      appendImageList(acc);\n      loadMoreBtn.enable();\n    })\n    .catch(onError);\n}\n\n//* додаємо кожен елемент в уінець списку\nfunction appendImageList(markup) {\n  // newsImg.innerHTML = markup;\n  newsImg.insertAdjacentHTML('beforeend', markup);\n}\n\n//* очищаємо список\nfunction clearImageList(markup) {\n  newsImg.innerHTML = '';\n}\n\n//* робимо розмітку кожному елементу\nfunction createMarcup({ webformatURL, tags, id }) {\n  return `<div class='thumb'>\n  <h1>${id}</h1>\n  <h4>${tags}</h4>\n      <img src=${webformatURL} alt=${tags} width=\"240\" class=\"image\"/>\n    </div>`;\n}\n\n//* виводемо повідомлення на помилку\nfunction onError(err) {\n  loadMoreBtn.hide();\n  appendImageList('<h1>Not faund</h1>');\n}\n","// const URL =\n//   'https://pixabay.com/api/?key=35628652-5826d534b36a8e5c375c91e65&q=cat';\n\n//   per_page: 12,\n//   page: 1,\n//   webformatURL,\n//   largeImageURL,\n\n// const options = {\n//   params: {\n//     q: val,\n//     image_type: 'photo',\n//     orientation: 'horizontal',\n//     per_page: 12,\n//     page: page,\n//   },\n// };\n\n// fetch(URL, options)\n//   .then(response => response.json())\n//   .then(({ hits }) => console.log(hits));\n\n// fetch(URL).then(response => console.log(response));\n\n// fetch(URL)\n//   .then(response => response.json())\n//   .then(data => console.log(data));\n\n// fetch(URL)\n//   .then(response => response.json())\n//   .then(({ hits }) => console.log(hits));\n\n//! ================== модуль 10 запит на API ====================\n\n// export default function fetchData(query) {\n//   const URL = `https://pixabay.com/api/?key=35628652-5826d534b36a8e5c375c91e65&q=${query}`;\n\n//   return fetch(URL).then(response => response.json());\n// }\n\n//! ================== модуль 10 пагінація ====================\nconst ENDPOIND = 'https://pixabay.com/api';\nconst KEY = '35628652-5826d534b36a8e5c375c91e65';\nexport default class ImageApiService {\n  constructor() {\n    this.page = 1;\n    this.searchQuery = '';\n  }\n\n  getImg() {\n    const URL = `${ENDPOIND}/?key=${KEY}&q=${this.searchQuery}&page=${this.page}&per_page=5`;\n\n    return fetch(URL)\n      .then(response => response.json())\n      .then(({ hits }) => {\n        this.nextPage();\n        return hits;\n      });\n  }\n\n  //додаємо сторінку\n  nextPage() {\n    this.page += 1;\n  }\n  // скидуємо на 1 сторінку при новому запиті\n  resetPage() {\n    this.page = 1;\n  }\n}\n","export default class LoadMoreBtn {\n  constructor({ selector, isHidden }) {\n    this.button = this.getButton(selector);\n    if (isHidden) this.hide();\n    else this.show();\n  }\n\n  //* знаходимо потрібну кнопку\n  getButton(selector) {\n    return document.querySelector(selector);\n  }\n\n  //* додаємо клас на кнопку\n  hide() {\n    this.button.classList.add('hidden');\n  }\n  //* видаляємо клас з кнопки\n  show() {\n    this.button.classList.remove('hidden');\n  }\n\n  //* показуємо що контент підвантажується\n  disabled() {\n    this.button.disabled = true;\n    this.button.textContent = 'Loading...';\n  }\n  enable() {\n    this.button.disabled = false;\n    this.button.textContent = 'Loading more';\n  }\n}\n"],"names":["$d706c914d748cb55$var$form","document","getElementById","$d706c914d748cb55$var$newsImg","$d706c914d748cb55$var$imageApiService","getImg","URL","this","searchQuery","page","fetch","then","response","json","hits","nextPage","resetPage","constructor","console","log","$d706c914d748cb55$var$loadMoreBtn","getButton","selector","querySelector","hide","button","classList","add","show","remove","disabled","textContent","enable","isHidden","$d706c914d748cb55$var$featchHits","length","Error","reduce","acc","hit","webformatURL","tags","id","$d706c914d748cb55$var$createMarcup","$d706c914d748cb55$var$appendImageList","catch","$d706c914d748cb55$var$onError","markup","insertAdjacentHTML","err","addEventListener","e","preventDefault","form1","currentTarget","value","elements","photo","trim","innerHTML","finally","reset","loadMore"],"version":3,"file":"index.03c9f3c4.js.map"}